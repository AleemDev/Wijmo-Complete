/*
 *
 * Wijmo Library 0.8.0
 * http://wijmo.com/
 *
 * Copyright(c) ComponentOne, LLC.  All rights reserved.
 * 
 * Dual licensed under the Wijmo Commercial or GNU GPL Version 3 licenses.
 * licensing@wijmo.com
 * http://wijmo.com/license
 *
 *
 **/
Raphael.fn.wij={moveTo:function(a,b){return this.path("M "+a+" "+b)},lineTo:function(a,b){return this.path("M "+this.wij.lastX+" "+this.wij.lastY+"L "+a+" "+b)},line:function(a,b,c,d){return this.path(["M",a,b,"L",c,d])},sector:function(b,c,a,d,e){var f=this.wij.getPositionByAngle(b,c,a,d),g=this.wij.getPositionByAngle(b,c,a,e);return this.path(["M",b,c,"L",f.x,f.y,"A",a,a,0,+(e-d>180),0,g.x,g.y,"z"])},donut:function(f,g,d,c,a,b){var e=this.wij.getPositionByAngle(f,g,d,a),j=this.wij.getPositionByAngle(f,g,d,b),i=this.wij.getPositionByAngle(f,g,c,a),h=this.wij.getPositionByAngle(f,g,c,b);return this.path(["M",e.x,e.y,"A",d,d,0,+(b-a>180),0,j.x,j.y,"L",h.x,h.y,"A",c,c,0,+(b-a>180),1,i.x,i.y,"L",e.x,e.y,"z"])},roundRect:function(l,m,e,d,j,h,g,i){var a=[],c=[-1,1,1,1,1,-1,-1,-1],f=["v","h","v","h"];$.each([j,h,g,i],function(c,b){if(typeof b=="number")a=a.concat({x:b,y:b});else if(typeof b=="object")a=a.concat(b);else a=a.concat({x:0,y:0})});var b=["M",l+a[0].x,m],k=[d-a[0].y-a[1].y,e-a[1].x-a[2].x,a[2].y+a[3].y-d,a[3].x+a[0].x-e];$.each(a,function(d,a){if(a.x&&a.y)b=b.concat("a",a.x,a.y,0,0,0,c[2*d]*a.x,c[2*d+1]*a.y);b=b.concat(f[d],k[d])});b.push("z");return this.path(b)},getPositionByAngle:function(e,f,c,d){var a={},b=Raphael.rad(d);a.x=e+c*Math.cos(-1*b);a.y=f+c*Math.sin(-1*b);return a},round:function(d,c){var b=Math.pow(10,c),a=d*b;a=Math.round(a);return a/b},getSVG:function(){function e(f,d){var c="<"+f+" ",a=null,e=false;for(var b in d){if(b=="text"||b=="opacity"||b=="transform"||b=="path"||b=="w"||b=="h"||b=="translation")continue;if((a=d[b])!=null){if(b=="stroke"&&a===0)a="none";c+=b+"='"+a+"' "}}if((a=d.opacity)!=null){c+="opacity='"+a+"' style='opacity:"+a+";";e=true}if((a=d.transform)!=null&&a.length>0)if(e)c+="transform:"+a;else{c+="style='transform:"+a;e=true}if(e)c+="'";if((a=d.text)!=null)c+="><tspan>"+a+"</tspan>";else c+=">";c+="</"+f+">";return c}for(var c=this,d='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+c.canvas.offsetWidth+'" height="'+c.canvas.offsetHeight+'"><desc>Created with Raphael</desc><defs></defs>',a=c.bottom;a!=null;a=a.next)if(a&&a.type)switch(a.type){case"path":var b="";$.each(a.attrs.path,function(c,a){$.each(a,function(d,c){if(d<1)b+=c;else if(d==a.length-1)b+=c;else b+=c+","})});if(b!=null&&b.length>0)a.attrs.d=b.replace(/,/g," ");case"text":if(a.attrs["text-anchor"]==null)a.attrs["text-anchor"]="middle";case"image":a.attrs.transform=a.transformations?a.transformations.join(" "):"";case"ellipse":case"rect":d+=e(a.type,a.attrs)}d+="</svg>";return d},tooltip:function(c){var a=this;function b(){var k={},j={"fill-opacity":.9,fill:"white"},b=null,e=null,i=false,d={x:0,y:0},g=null,f=null;this.showDelay=250;this.hideDelay=250;this.duration=250;this.easing="";this.compass="west";this.offset=0;this.text="";this.textAttr={};this.rectAttr={};this.rectRadius=5;var h=function(a){if(a!=null){window.clearTimeout(a);a=null}};this.hide=function(a){g&&h(g);f&&h(f);if(a!=null)this.hideDelay=a;var b=this;if(this.hideDelay>0)f=window.setTimeout(function(){b._hide()},this.hideDelay);else b._hide()};this.showAt=function(c,a){g&&h(g);f&&h(f);if(a!=null)this.showDelay=a;var b=this;if(this.showDelay>0)g=window.setTimeout(function(){b._show(c)},this.showDelay);else b._show(c)};this._hide=function(){if(b){b.stop();b.remove();b=null}if(e){e.stop();e.remove();e=null}i=false};this._show=function(m){if(b==null)b=a.text(0,0,this.text);var n=$.extend(k,this.textAttr);b.attr({text:this.text});b.attr(n);var g=b.wijGetBBox();g.width=g.width+10;g.height=g.height>30?g.height:30;var f=c._getCompassTextPosition(this.compass,g,this.offset,m,0);if(e==null)b.attr({x:f.endPoint.x+f.offsetX,y:f.endPoint.y+f.offsetY});else b.attr({x:d.x+d.offsetX,y:d.y+d.offsetY});var o=$.extend(j,this.rectAttr),l=this._convertCompassToPos(this.compass);if(e==null)e=a.popup(f.endPoint.x,f.endPoint.y,b,l);else{e.remove();e=a.popup(d.x,d.y,b,l);var h=f.endPoint.x-d.x+","+(f.endPoint.y-d.y);e.stop().animate({translation:h},this.duration,this.easing);b.stop().animate({translation:h},this.duration,this.easing)}d.x=f.endPoint.x;d.y=f.endPoint.y;d.offsetX=f.offsetX;d.offsetY=f.offsetY;e.attr(o);b.toFront();i=true};this._convertCompassToPos=function(b){var a="";switch(b){case"northeast":a="top-left";break;case"northwest":a="top-right";break;case"southeast":a="bottom-left";break;case"southwest":a="bottom-right";break;case"south":a="bottom";break;case"north":a="top";break;case"east":a="right";break;case"west":default:a="left"}return a}}return new b}};Raphael.el.wijGetBBox=function(){var a=this.getBBox();if(Raphael.vml)if(this.type==="text"){this.shape.style.display="inline";a.width=this.shape.scrollWidth;a.height=this.shape.scrollHeight}else{a.width=this.W;a.height=this.H}return a};Raphael.el.getBBoxRotated=function(){if(this.attrs.rotation!=0){var d=this._.rt.deg*Math.PI/180,c=[],b=this.getBBox();c.push({x:0,y:0});c.push({x:b.width,y:0});c.push({x:0,y:b.height});c.push({x:b.width,y:b.height});var a=[];a.left=0;a.right=0;a.top=0;a.bottom=0;for(_px=0;_px<c.length;_px++){var e=c[_px],f=parseInt(e.x*Math.cos(d)+e.y*Math.sin(d)),g=parseInt(e.x*Math.sin(d)+e.y*Math.cos(d));a.left=Math.min(a.left,f);a.right=Math.max(a.right,f);a.top=Math.min(a.top,g);a.bottom=Math.max(a.bottom,g)}var i=parseInt(Math.abs(a.right-a.left)),h=parseInt(Math.abs(a.bottom-a.top)),f=b.x+b.width/2-i/2,g=b.y+b.height/2-h/2;return{x:f,y:g,width:i,height:h}}else return this.getBBox()};Raphael.el.wijAnimate=function(a,f,c,b){this.animate(a,f,c,b);var e=this.shadow;if(e){var d=e.offset;if(a.x)a.x+=d;if(a.y)a.y+=d;this.shadow.animate(a,f,c,b)}};Raphael.el.wijAttr=function(a,c){this.attr(a,c);if(this.shadow)if(typeof a=="object"){var b=$.extend(true,{},a);if(b.fill)delete b.fill;if(b.stroke)delete b.stroke;if(b["stroke-width"]!=null)delete b["stroke-width"];this.shadow.attr(b,c)}else if(typeof a=="string")switch(a){case"clip-rect":case"cx":case"cy":case"fill-opacity":case"font":case"font-family":case"font-size":case"font-weight":case"height":case"opacity":case"path":case"r":case"rotation":case"rx":case"ry":case"scale":case"stroke-dasharray":case"stroke-linecap":case"stroke-linejoin":case"stroke-miterlimit":case"stroke-opacity":case"stroke-width":case"translation":case"width":this.shadow.attr(a,c);break;case"x":this.shadow.attr(a,c);this.shadow.attr("translation","1 0");break;case"y":this.shadow.attr(a,c);this.shadow.attr("translation","0 1")}};Raphael.st.wijAttr=function(c,b){for(var a=0,d=this.items.length;a<d;a++)this.items[a].wijAttr(c,b);return this};Raphael.st.wijAnimate=function(e,f,d,c){for(var b=0,g=this.items.length;b<g;b++){var a=this.items[b];a.animate(e,f,d,c);a.shadow&&a.shadow.animate(e,f,d,c)}return this};function isSVGElem(a){var b="http://www.w3.org/2000/svg";return a.nodeType==1&&a.namespaceURI==b}$.expr.filter.CLASS=function(a,c){var b=!isSVGElem(a)?a.className:a.className?a.className.baseVal:a.getAttribute("class");return(" "+b+" ").indexOf(c)>-1};$.expr.preFilter.CLASS=function(b,d,f,g,i,h){b=" "+b[1].replace(/\\/g,"")+" ";if(h)return b;for(var c=0,a={};a!=null;c++){a=d[c];if(!a)try{a=d.item(c)}catch(j){}if(a){var e=!isSVGElem(a)?a.className:(a.className?a.className.baseVal:"")||a.getAttribute("class");if(i^(e&&(" "+e+" ").indexOf(b)>-1))!f&&g.push(a);else if(f)d[c]=false}}return false};(function(a){a.widget("ui.wijchartcore",{options:{width:null,height:null,seriesList:[],seriesStyles:[{stroke:"#77b3af",opacity:.9,"stroke-width":"1"},{stroke:"#67908e",opacity:.9,"stroke-width":"1"},{stroke:"#465d6e",opacity:.9,"stroke-width":"1"},{stroke:"#5d3f51",opacity:.9,"stroke-width":"1"},{stroke:"#682e32",opacity:.9,"stroke-width":"1"},{stroke:"#8c5151",opacity:.9,"stroke-width":"1"},{stroke:"#ce9262",opacity:.9,"stroke-width":"1"},{stroke:"#ceb664",opacity:.9,"stroke-width":"1"},{stroke:"#7fb34f",opacity:.9,"stroke-width":"1"},{stroke:"#2a7b5f",opacity:.9,"stroke-width":"1"},{stroke:"#6079cb",opacity:.9,"stroke-width":"1"},{stroke:"#60a0cb",opacity:.9,"stroke-width":"1"}],seriesHoverStyles:[{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"},{opacity:1,"stroke-width":"1.5"}],marginTop:25,marginRight:25,marginBottom:25,marginLeft:25,textStyle:{fill:"#888","font-size":"10pt",stroke:"none"},header:{text:"",style:{fill:"none",stroke:"none"},textStyle:{"font-size":"18pt",fill:"#666",stroke:"none"},compass:"north",orientation:"horizontal",visible:true},footer:{text:"",style:{fill:"#fff",stroke:"none"},textStyle:{fill:"#000",stroke:"none"},compass:"south",orientation:"horizontal",visible:false},legend:{textSpacing:50,text:"",textMargin:{left:2,top:2,right:2,bottom:2},style:{fill:"none",stroke:"none"},textStyle:{fill:"#333",stroke:"none"},titleStyle:{"font-weight":"bold",fill:"#000",stroke:"none"},compass:"east",orientation:"vertical",visible:true},axis:{x:{alignment:"center",style:{stroke:"#999999","stroke-width":.5},visible:true,textVisible:true,textStyle:{fill:"#888","font-size":"15pt","font-weight":"bold"},labels:{style:{fill:"#333","font-size":"11pt"},textAlign:"near"},compass:"south",autoMin:true,autoMax:true,min:null,max:null,autoMajor:true,autoMinor:true,unitMajor:null,unitMinor:null,gridMajor:{visible:false,style:{stroke:"#CACACA","stroke-dasharray":"- "}},gridMinor:{visible:false,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",valueLabels:[]},y:{alignment:"center",style:{stroke:"#999999","stroke-width":.5},visible:false,textVisible:true,textStyle:{fill:"#888","font-size":"15pt","font-weight":"bold"},labels:{style:{fill:"#333","font-size":"11pt"},textAlign:"center"},compass:"west",autoMin:true,autoMax:true,min:null,max:null,autoMajor:true,autoMinor:true,unitMajor:null,unitMinor:null,gridMajor:{visible:true,style:{stroke:"#999999","stroke-width":"0.5","stroke-dasharray":"none"}},gridMinor:{visible:false,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",valueLabels:[]}},hint:{enable:true,formatter:null,offset:0,compass:"north",showDelay:0,hideDelay:0,textStyle:{fill:"#d1d1d1","font-size":"16pt"},style:{fill:"270-#333333-#000000","stroke-width":"2"},duration:120,easing:"easeOutExpo"},showDefaultChartLabels:true,chartLabelStyle:{},disableDefaultTextStyle:false,shadow:true,mousedown:null,mouseup:null,mouseover:null,mouseout:null,mousemove:null,click:null,beforeserieschange:null,serieschanged:null,beforepaint:null,painted:null},innerState:{},_setOption:function(c,b){switch(c){case"seriesList":if(b==null)b=[];var d=a.Event("beforeserieschange");this._trigger("beforeserieschange",d,{oldSeriesList:this.options.seriesList,newSeriesList:b});if(d.isImmediatePropagationStopped())return false;this.options.seriesList=b;this.innerState={};this._paint();this._trigger("serieschanged",null,b);break;default:if(a.isPlainObject(this.options[c]))a.extend(true,this.options[c],b);else this.options[c]=b;this._unbindLiveEvents();this._paint();this._bindLiveEvents()}a.Widget.prototype._setOption.apply(this,arguments)},_create:function(){var d=this.options.width,c=this.options.height;this.innerState={};if(this.element.length>0){var e=this.element[0];if(this.element.is("table")){this._parseTable();var b=a("<div></div>");if(d!=null)b.css("width",d);else b.css("width",this.element.width());if(c!=null)b.css("height",c);else b.css("height",this.element.height());this.element.after(b);e=b[0];this.chartElement=b}else this.chartElement=this.element;this.chartElement.addClass("ui-widget");if(d==null)d=a(e).width();if(c==null)c=a(e).height();this.canvas=Raphael(e,d,c);this.width=d;this.height=c}this.headerEles=[];this.footerEles=[];this.legendEles=[];this.axisEles=[];this.legends=[];this.legendIcons=[];this.chartLabelEles=[]},_parseTable:function(){var d=this.element,b=this.options;if(!d.is("table"))return;var c=a("caption",d);if(c.length){b.header=a.extend({visible:true,text:a.trim(a(c[0]).text())},b.header);if(c.length>1)b.footer=a.extend({visibel:true,text:a.trim(a(c[1]).text())},b.footer)}b.legend=a.extend({visible:true},b.legend);var g=[],f=a("thead th",d);f.length&&f.each(function(){var b=a.trim(a(this).text());g.push(b)});var e=[],h=a("tbody tr",d);h.length&&h.each(function(){var h=a("th",a(this)),f=a.trim(h.text()),b=[],c=a("td",a(this));c.length&&c.each(function(){var c=a(this);b.push(parseFloat(a.trim(c.text())))});var d={label:f,legendEntry:true,data:{x:g,y:b}};e.push(d)});this.options.seriesList=e},_init:function(){var b=this;if(!b._rendered){b._paint();b._bindLiveEvents();b._rendered=true;if(b.options.width==null||b.options.height==null){var c;a(window).resize(function(){clearTimeout(c);c=setTimeout(function(){b._unbindLiveEvents();var c=b.element.width(),a=b.element.height();b.canvas.setSize(c,a);b.width=c;b.height=a;b._paint();b._bindLiveEvents()},250)})}}},destroy:function(){this._unbindLiveEvents();this._clearChartElement();this.chartElement.removeClass("ui-widget");this.element!=this.chartElement&&this.chartElement.remove();a.Widget.prototype.destroy.apply(this,arguments)},getCanvas:function(){return this.canvas},getSVG:function(){return Raphael.type=="SVG"?this.chartElement.html():this.canvas.wij.getSVG()},exportChart:function(){var b=document.createElement("form");b.action="http://export.highcharts.com/";b.method="post";b.style.display="none";document.body.appendChild(b);var c=this.getSVG();a.each(["filename","type","width","svg"],function(f,e){var d=document.createElement("input");a(d).attr("name",e).attr("type","hidden").attr("value",({filename:"chart",type:"image/png",width:600,svg:c})[e]);b.appendChild(d)});b.submit();document.body.removeChild(b)},addSeriesPoint:function(c,d,f){var b=this.options.seriesList;if(c>=b.length)return;var e=b[c],a=e.data||[];a.x.push(d.x);a.y.push(d.y);if(f){a.x.shift();a.y.shift()}this._setOption("seriesList",b)},_clearChartElement:function(){if(this.headerEles.length){for(var a=0,b=this.headerEles.length;a<b;a++)this.headerEles[a].remove();this.headerEles=[]}if(this.footerEles.length){for(var a=0,b=this.footerEles.length;a<b;a++)this.footerEles[a].remove();this.footerEles=[]}if(this.legendEles.length){for(var a=0,b=this.legendEles.length;a<b;a++)this.legendEles[a].remove();this.legendEles=[]}if(this.legends.length){for(var a=0,b=this.legends.length;a<b;a++)this.legends[a].remove();this.legends=[]}if(this.legendIcons.length){for(var a=0,b=this.legendIcons.length;a<b;a++)this.legendIcons[a].remove();this.legendIcons=[]}if(this.axisEles.length){for(var a=0,b=this.axisEles.length;a<b;a++)this.axisEles[a].remove();this.axisEles=[]}if(this.chartLabelEles.length){for(var a=0,b=this.chartLabelEles.length;a<b;a++)this.chartLabelEles[a].remove();this.chartLabelEles=[]}this.canvas.clear()},_text:function(c,d,b){var a=this.canvas.text(c,d,b);if(this.options.disableDefaultTextStyle)a.node.style.cssText="";return a},_paintShadow:function(c,a,d){if(this.options.shadow){a=a||1;d=d||"#CCCCCC";var b=c.clone();b.insertBefore(c);b.attr({translation:a+" "+a,stroke:d,"stroke-width":a});b.toBack();b.offset=a;c.shadow=b}},_paint:function(){this._clearChartElement();var b=a.Event("beforepaint");this._trigger("beforepaint",b);if(b.isImmediatePropagationStopped())return false;var c=this.options;this.canvasBounds={startX:0,endX:this.width,startY:0,endY:this.height};this._paintHeader();this._paintFooter();this._paintLegend();this._paintChartArea();this._paintChartLabels();this._trigger("painted")},_calculatePosition:function(f,e,d){var a={x:0,y:0},b=5,c=5;switch(f){case"north":a.x=(this.canvasBounds.endX-this.canvasBounds.startX)/2;a.y=this.canvasBounds.startY+d/2+c;this.canvasBounds.startY=this.canvasBounds.startY+c*2+d;break;case"south":a.x=(this.canvasBounds.endX-this.canvasBounds.startX)/2;a.y=this.canvasBounds.endY-d/2-c;this.canvasBounds.endY=this.canvasBounds.endY-c*2-d;break;case"east":a.x=this.canvasBounds.endX-e/2-b;a.y=(this.canvasBounds.endY-this.canvasBounds.startY)/2;this.canvasBounds.endX=this.canvasBounds.endX-b*2-e;break;case"west":a.x=this.canvasBounds.startX+e/2+b;a.y=(this.canvasBounds.endY-this.canvasBounds.startY)/2;this.canvasBounds.startX=this.canvasBounds.startX+b*2+e}return a},_paintHeader:function(){var d=2,i=this.options,b=i.header;if(b.text&&b.text.length>0&&b.visible){var k=b.compass,c=this._text(0,0,b.text),j=a.extend(true,{},i.textStyle,b.textStyle);c.attr(j);var h=c.wijGetBBox(),g=this._calculatePosition(k,h.width,h.height);c.translate(g.x,g.y);var e=c.wijGetBBox(),f=this.canvas.rect(e.x-d,e.y-d,e.width+2*d,e.height+2*d);f.attr(b.style);f.toBack();this.headerEles.push(c);this.headerEles.push(f)}},_paintFooter:function(){var d=2,i=this.options,b=i.footer;if(b.text&&b.text.length>0&&b.visible){var k=b.compass,c=this._text(0,0,b.text),j=a.extend(true,{},i.textStyle,b.textStyle);c.attr(j);var h=c.wijGetBBox(),g=this._calculatePosition(k,h.width,h.height);c.translate(g.x,g.y);var e=c.wijGetBBox(),f=this.canvas.rect(e.x-d,e.y-d,e.width+2*d,e.height+2*d);f.attr(b.style);f.toBack();this.footerEles.push(c);this.footerEles.push(f)}},_paintLegend:function(){var p=this.options,g=2,e={size:{width:22,height:10}};a.extend(true,e,p.legend);if(e.visible){var r=e.compass,q=e.orientation,h;if(e.text&&e.text.length){h=this._text(0,0,e.text);var D=a.extend(true,{},p.textStyle,e.textStyle,e.titleStyle);h.attr(D);this.legendEles.push(h)}var u=p.seriesList,H=p.seriesStyles,k=e.size.width,K=e.size.height;if(!e.reversed)for(var f=0,z=u.length;f<z;f++){var i=u[f];i=a.extend({legendEntry:true},i);var I=H[f],J=a.extend(true,{fill:"none",opacity:1,stroke:"black"},I);if(i.legendEntry){var y=this._text(0,0,i.label),D=a.extend(true,{},p.textStyle,e.textStyle);y.attr(D);this.legends.push(y);var L=a.extend(J,{"stroke-width":1}),n=this.canvas.rect(0,0,k,K);n.attr(L);this.legendIcons.push(n)}}else for(var f=u.length-1;f>=0;f--){var i=u[f];i=a.extend({legendEntry:true},i);var I=H[f],J=a.extend(true,{fill:"none",opacity:1,stroke:"black"},I);if(i.legendEntry){var y=this._text(0,0,i.label),D=a.extend(true,{},p.textStyle,e.textStyle);y.attr(D);this.legends.push(y);var L=a.extend(J,{"stroke-width":1}),n=this.canvas.rect(0,0,k,K);n.attr(L);this.legendIcons.push(n)}}var s=0,T=0,m=0;if(h)T=h.wijGetBBox().width;var w=0,j=0,l=0;if(h)j=h.wijGetBBox().height;var d=this.legends.length;if(d)for(f=0,z=d;f<z;f++){var S=this.legends[f],x=S.wijGetBBox();if(x.width>m)m=x.width;if(x.height>l)l=x.height}var v=this.canvasBounds.endX-this.canvasBounds.startX,t=this.canvasBounds.endY-this.canvasBounds.startY,c=1,b=e.textMargin;if(r=="east"||r=="west"){if(q=="horizontal"){var C=d*(m+k+g)+d*(b.left+b.right);if(C>v/2){c=Math.floor(v/2/m);if(c<1)c=1}else c=d}else if(q=="vertical"){var B=l*d+j+d*(b.top+b.bottom);if(B>t)c=Math.ceil(B/t);else c=1}}else if(r=="south"||r=="north")if(q=="horizontal"){var C=(m+k+g)*d+d*(b.left+b.right);if(C>v){c=Math.floor(d/C*v);if(c<1)c=1}else c=d}else if(q=="vertical"){var B=l*d+j+d*(b.top+b.bottom);if(B>t/2){var U=Math.floor(t-j)/2/l;c=Math.ceil(d/U)}else c=1}s=c*(m+k+g)+c*(b.left+b.right);w=l*Math.ceil(d/c)+j+c*(b.top+b.bottom);var N=this._calculatePosition(r,s,w),E=N.x-s/2,F=N.y-w/2,A=this.canvas.rect(E-g,F-g,s+2*g,w+2*g);A.attr(e.style);A.toBack();this.legendEles.push(A);var O=0;if(h){h.translate(E+s/2,F+O+j/2);if(q=="vertical")O=j}for(var o=0,M=j,f=0,z=d;f<z;f++){var G=this.legends[f],n=this.legendIcons[f],P=G.wijGetBBox(),Q=E+o*(k+m+g)+(o+1)*b.left+o*b.right,R=F+M+P.height/2+b.top;n.translate(Q,R-n.wijGetBBox().height/2);G.translate(Q+k+g+P.width/2,R);G.toFront();o++;if(o==c){o=0;M+=l+b.top+b.bottom}}}},_hasAxes:function(){return this.widgetName=="wijpiechart"?false:true},_applyAxisText:function(c){var e=c.text,b=null;if(e!=null&&e.length>0){var d=this._text(-100,-100,e),f=a.extend(true,{},this.options.textStyle,c.textStyle);d.attr(f);b=d.wijGetBBox();switch(c.compass){case"north":this.canvasBounds.startY+=b.height;break;case"south":this.canvasBounds.endY-=b.height;break;case"east":this.canvasBounds.endX-=b.height;break;case"west":this.canvasBounds.startX+=b.height}d.remove()}return b},_paintChartArea:function(){this._applyMargins();if(this.options.seriesList==null||this.options.seriesList.length==0)return;if(this._hasAxes()){if(this.innerState.axisInfo){this.axisInfo=this.innerState.axisInfo;this.canvasBounds=this.innerState.canvasBounds}else{var a=this.options.axis,g=2,h=this._applyAxisText(a.x),i=this._applyAxisText(a.y);this.axisInfo={x:{id:"x",tprec:0,isTime:false,offset:0,max:0,min:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:h,axisTextOffset:g},y:{id:"y",tprec:0,isTime:false,offset:0,max:0,min:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:i,axisTextOffset:g}};var b=this._getDataExtreme();if(a.x.autoMin)a.x.min=b.txn;if(a.x.autoMax)a.x.max=b.txx;if(a.y.autoMin)a.y.min=b.tyn;if(a.y.autoMax)a.y.max=b.tyx;var d=5,c=this.options.axis;do{var f=this._autoPosition(this.axisInfo.y,c.y),e=this._autoPosition(this.axisInfo.x,c.x);if(f==this.axisInfo.y.offset&&e==this.axisInfo.x.offset){d=0;break}if(f!=this.axisInfo.y)this.axisInfo.y.offset=f;if(e!=this.axisInfo.x)this.axisInfo.x.offset=e;d--}while(d>0);this._adjustPlotArea(c.x,this.axisInfo.x);this._adjustPlotArea(c.y,this.axisInfo.y);this.innerState.axisInfo=this.axisInfo;this.innerState.canvasBounds=this.canvasBounds}this._paintAxes();this._paintPlotArea()}else this._paintPlotArea()},_adjustPlotArea:function(b,a){b.max=a.max;b.min=a.min;switch(b.compass){case"north":this.canvasBounds.startY+=a.offset;break;case"south":this.canvasBounds.endY-=a.offset;break;case"east":this.canvasBounds.endX-=a.offset;break;case"west":this.canvasBounds.startX+=a.offset}},_autoPosition:function(b,a){return this._autoPositionCartesianAxis(b,a)},_autoPositionCartesianAxis:function(b,a){switch(a.compass){case"north":case"south":this._calculateParameters(b,a);var c=this._getMaxExtents(b,a);return c.height;case"east":case"west":this._calculateParameters(b,a);var c=this._getMaxExtents(b,a);return c.width}},_getMaxExtents:function(b,d,o){var s=this._getTickRect(b,d,true,true,o),t=this._getTickRect(b,d,false,true,o);b.majorTickRect=s;b.minorTickRect=t;var h=this._getMajorTickValues(b,d),g={width:0,height:0},p=this.options,v=b.min,u=b.max,r=b.isTime,f=d.annoFormatString;if(!f)f=b.annoFormatString;if(h!=null&&h.length)for(var q=p.is100Percent,m=0,k=0;m<h.length;m++,k++){var c=h[m];if(c>=v&&c<=u){if(d.annoMethod=="valueLabels")c=d.valueLabels[k].text;else if(d.annoMethod=="values")if(f&&f.length){if(r)c=this._fromOADate(c);c=a.format(c,f)}else if(q&&b.id=="y")c=a.format(c,"p0");var n=a.extend(true,{},p.textStyle,d.textStyle,d.labels.style),l=this._text(-100,-100,c).attr(n),j,i;if(n.rotation){var e=l.getBBoxRotated();j=e.width;i=e.height}else{var e=l.wijGetBBox();j=e.width;i=e.height}l.remove();if(e.width>g.width)g.width=j;if(e.height>g.height)g.height=i}else k--}return g},_getMajorTickValues:function(a,c){var b=[];b=this._getTickValues(a.max,a.min,c.unitMajor,a.tprec,!a.isTime);return b},_getMinorTickValues:function(a,c){var b=[];b=this._getTickValues(a.max,a.min,c.unitMinor,a.tprec,!a.isTime);return b},_getTickValues:function(f,a,b,d,l){var g=[],k=a;try{if(b==0)g=[f,a];else{if(d+1<0)d=-1;else if(d+1>15)d=14;var i=this.canvas.wij.round(this._signedCeiling(a/b)*b,d+1);if(i<f)a=i;var m=parseInt(this.canvas.wij.round(f/b,5)),j=parseInt(this.canvas.wij.round(a/b,5)),c=parseInt(m-j+1);if(c>1){var h=j*b;if(h<a){c--;a+=b}h=a+(c-1)*b;if(h>f)c--}if(c<1){c=2;a=k;b=f-a}for(var e=0;e<c;e++)if(l)g[e]=this.canvas.wij.round(a+e*b,d+1);else g[e]=a+e*b}}catch(n){}return g},_getTickRect:function(k,d,j,e){var c=d.compass,f=0,a=null,h=3,i=2,g=2;if(j){a=d.tickMajor.position;f=h*d.tickMajor.factor}else{a=d.tickMinor.position;f=i*d.tickMinor.factor}if(a=="none"||a=="inside"&&e)f=0;var b={x:0,y:0,width:0,height:0};if(c=="east"||c=="west"){b={x:0,y:-1,width:f*g,height:g};if(c=="east"&&(a=="outside"||a=="cross"&&e)||c=="west"&&a=="inside")b.width+=2;else if(!e){if(a=="corss")b.width<<=1;b.width+=2}}else{b={x:-1,y:0,width:g,height:f*g};if(c=="south"&&(a=="outside"||a=="corss"&&e)||c=="north"&&a=="inside")b.height+=2;else if(!e){if(a=="cross")b.height<<=1;b.height+=2}}return b},_applyMargins:function(){var a=this.options;this.canvasBounds.startX+=a.marginLeft;this.canvasBounds.endX-=a.marginRight;this.canvasBounds.startY+=a.marginTop;this.canvasBounds.endY-=a.marginBottom},_paintAxes:function(){this._paintAxis(this.options.axis.x,this.axisInfo.x);this._paintAxis(this.options.axis.y,this.axisInfo.y)},_paintAxis:function(c,f){var b=this.canvasBounds,d={x:0,y:0,ox:0,oy:0},e={x:0,y:0,ox:0,oy:0},r=c.compass,h=2,q=true;switch(r){case"south":d.x=b.startX;d.ox=b.startX;d.y=b.endY;d.oy=b.startY;e.x=b.endX;e.ox=b.endX;e.y=b.endY;e.oy=b.startY;q=false;break;case"north":d.x=b.startX;d.ox=b.startX;d.y=b.startY-h;d.oy=b.endY-h;e.x=b.endX;e.ox=b.endX;e.y=b.startY-h;e.oy=b.endY-h;q=false;break;case"east":d.x=b.endX;d.ox=b.startX;d.y=b.endY;d.oy=b.endY;e.x=b.endX;e.ox=b.startX;e.y=b.startY;e.oy=b.startY;break;case"west":d.x=b.startX-h;d.ox=b.endX;d.y=b.endY;d.oy=b.endY;e.x=b.startX-h;e.ox=b.endX;e.y=b.startY;e.oy=b.startY}var u=this.canvas.wij.line(d.x,d.y,e.x,e.y);u.attr(c.style);!c.visible&&u.hide();this.axisEles.push(u);var p=this._getMajorTickValues(f,c),l=this._getMinorTickValues(f,c);l=this._resetMinorTickValues(l,p);var L=p.length,M=l.length,o=f.min,n=f.max,J=c.unitMajor,K=c.unitMinor,H=c.tickMajor.position,I=c.tickMinor.position,y=f.offset,z=c.tickMajor.style,A=c.tickMinor.style,B=f.majorTickRect,C=f.minorTickRect,w=f.axisTextOffset,N=f.isTime,k=c.annoFormatString;if(!k)k=f.annoFormatString;for(var D=this.options.is100Percent,E=c.gridMajor,F=c.gridMinor,s=c.labels,t=0,x=[],j=0,v=0;v<L;j++,v++){var g=p[v],i=g;if(g>=o&&g<=n){if(c.annoMethod=="valueLabels")i=c.valueLabels[j].text;else if(c.annoMethod=="values")if(k&&k.length){if(N)i=this._fromOADate(g);i=a.format(i,k)}else if(D&&f.id=="y")i=a.format(g,"p0");var G=a.extend(true,{},this.options.textStyle,c.textStyle,s.style),m=this._paintMajorMinor(n,o,g,H,J,B,r,d,e,y,w,z,i,E,c.textVisible,G,s.textAlign);if(m){x.push(m);if(t<m.len)t=m.len}}else j--}a.each(x,function(d,c){var b=c.text,a=(c.len-t)/2;a=s.textAlign=="near"?a*-1:a;if(q)b.translate(a,0);else b.translate(0,a)});for(var j=0;j<M;j++){var g=l[j];g>o&&g<n&&this._paintMajorMinor(n,o,g,I,K,C,r,d,e,y,w,A,null,F,c.textVisible)}this._paintAxisText(c,f)},_paintAxisText:function(g,d){var p=g.text;if(p==null||p.length==0)return;var m=g.compass,r=g.alignment,i=this.canvasBounds.startX,j=this.canvasBounds.startY,n=this.canvasBounds.endX,o=this.canvasBounds.endY,e=i,f=j,b=d.textBounds,l=this._isVertical(m),h=d.axisTextOffset,q=d.majorTickRect,s=g.tickMajor.position,c=l?q.width:q.height;if(s=="cross")c=c/2;else if(s=="inside")c=0;if(l){switch(r){case"near":f=o-b.width/2;break;case"center":f=(j+o)/2;break;case"far":f=j+b.width/2}if(m=="west")e=i-(d.offset+h+c+b.height/2);else e=n+d.offset+h+c+b.height/2}else{switch(r){case"near":e=i+b.width/2;break;case"center":e=(i+n)/2;break;case"far":e=n-b.width/2}if(m=="north")f=j-(d.offset+h+c+b.height/2);else f=o+d.offset+h+c+b.height/2}var k=this._text(e,f,p);this.axisEles.push(k);var t=a.extend(true,{},this.options.textStyle,g.textStyle);k.attr(t);l&&k.rotate(-90)},_resetMinorTickValues:function(a,d){for(var b=a.length-1;b>=0;b--)for(var f=a[b],c=d.length-1;c>=0;c--){var e=d[c];f==e&&a.splice(b,1)}return a},_paintMajorMinor:function(z,p,A,e,F,b,g,k,v,l,i,s,y,o,B,D,C){var c=k.x,d=k.y,m=-1,n=-1,j=true,f=this.canvasBounds,w=null;switch(g){case"south":if(e=="inside")d-=b.height;else if(e=="cross")d-=b.height/2;n=d+i+b.height+l/2;j=false;break;case"west":if(e=="outside")c-=b.width;else if(e=="cross")c-=b.width/2;m=c-(i+l/2);break;case"north":if(e=="outside")d-=b.height;else if(e=="cross")d-=b.height/2;n=d-(i+l/2);j=false;break;case"east":if(e=="inside")c-=b.width;else if(e=="cross")c-=b.width/2;m=c+i+b.width+l/2}var r=null,E=[],t={"stroke-width":2};if(j){d+=(A-p)/(z-p)*(v.y-k.y);if(o.visible)if(d!=f.startY&&g=="east"||d!=f.endY&&g=="west"){var x=["M",f.startX,d,"H",f.endX],q=this.canvas.path(x.concat(" "));q.attr(o.style);this.axisEles.push(q)}n=d;var E=["M",c,d,"h",b.width];s["stroke-width"]=b.height}else{c+=(A-p)/(z-p)*(v.x-k.x);if(o.visible)if(c!=f.startX&&g=="south"||c!=f.endX&&g=="north"){var x=["M",c,f.startY,"V",f.endY],q=this.canvas.path(x.concat(" "));q.attr(o.style);this.axisEles.push(q)}m=c;var E=["M",c,d,"v",b.height];s["stroke-width"]=b.width}r=this.canvas.path(E.concat(" "));t=a.extend(t,s);r.attr(t);this.axisEles.push(r);if(y!=null){var h=this._text(m,n,y.toString());h.attr(D);this.axisEles.push(h);!B&&h.hide();if(C!="center"){var u=h.wijGetBBox();w={text:h,len:j?u.width:u.height}}}return w},_paintPlotArea:function(){},_paintChartLabels:function(){var b=this.options.chartLabels;if(b&&b.length)for(var e=0,f=b.length;e<f;e++){var c=a.extend(true,{compass:"east",attachMethod:"coordinate",attachMethodData:{seriesIndex:-1,pointIndex:-1,x:-1,y:-1},offset:0,visible:false,text:"",connected:false},b[e]);if(c.visible){var d=this._getChartLabelPointPosition(c);if(isNaN(d.x)||isNaN(d.y))break;this._setChartLabel(c,d)}}},_getChartLabelPointPosition:function(){},_setChartLabel:function(c,e,l,i){var k=c.compass,g=this.options,j=a.extend(true,{},g.textStyle,g.chartLabelStyle),d=this._text(0,0,c.text).attr(j);this.chartLabelEles.push(d);var f=c.offset,b=this._getCompassTextPosition(k,d.wijGetBBox(),f,e,l);if(f&&c.connected){var h=this.canvas.path("M"+e.x+" "+e.y+"L"+b.endPoint.x+" "+b.endPoint.y);h.attr(i);this.chartLabelEles.push(h)}d.translate(b.endPoint.x+b.offsetX,b.endPoint.y+b.offsetY);d.toFront()},_getCompassTextPosition:function(g,b,h,f,a){var c=0,d=0,e={x:0,y:0};switch(g){case"east":a=0;break;case"west":a=180;break;case"north":a=90;break;case"south":a=270;break;case"northeast":a=45;break;case"northwest":a=135;break;case"southeast":a=315;break;case"southwest":a=225}if(a>=0&&a<45/2||a>675/2&&a<360)c=b.width/2;else if(a>=45/2&&a<135/2){c=b.width/2;d=-1*b.height/2}else if(a>=135/2&&a<225/2)d=-1*b.height/2;else if(a>=225/2&&a<315/2){c=-1*b.width/2;d=-1*b.height/2}else if(a>=315/2&&a<405/2)c=-1*b.width/2;else if(a>=405/2&&a<495/2){c=-1*b.width/2;d=b.height/2}else if(a>=495/2&&a<585/2)d=b.height/2;else{c=b.width/2;d=b.height/2}e=this.canvas.wij.getPositionByAngle(f.x,f.y,h,a);return{endPoint:e,offsetX:c,offsetY:d}},_getXSortedPoints:function(e){var b=e.data.x,f=[].concat(b),g=[].concat(e.data.y),d=[],c=b;if(b.length==0)return;function h(a,b){return a-b}if(typeof b[0]=="number")c=[].concat(b).sort(h);a.each(c,function(c,b){a.each(f,function(e,a){if(b==a){if(isNaN(a))a=c;d.push({x:a,y:g[e]});f.splice(e,1);g.splice(e,1);return false}})});return d},_bindLiveEvents:function(){},_unbindLiveEvents:function(){},_isBarChart:function(){return this.widgetName=="wijbarchart"},_calculateParameters:function(c,d){var b=d.max,a=d.min,m=d.autoMax,n=d.autoMin,o=d.autoMajor,p=d.autoMinor,g=null,q=d.annoMethod=="valueLabels";if(m&&b!=Number.MIN_VALUE)if(c.id!="x"&&this._isBarChart())if(b<0&&.5*(b-a)>-b)b=0;if(n&&a!=Number.MAX_VALUE)if(c.id!="x"&&this._isBarChart())if(a>0&&.5*(b-a)>a)a=0;if(b==a){if(a!=0)a-=1;b+=1}var e=b-a,h=0,i=c.isTime;if(i){g=d.annoFormatString;if(g==null||g.length==0){g=this._getTimeDefaultFormat(b,a);c.annoFormatString=g}h=this._niceTimeUnit(0,g)}var l=this._nicePrecision(e);c.tprec=l;if(m)if(i){var j=this._roundTime(b,h,true);if(j<b)b=j+h;else b=j}else{var j=this._precCeil(-l,b);if(!isNaN(j))b=j}if(n)if(i){var k=this._roundTime(a,h,false);if(k>a)a=k-h;else a=k}else{var k=this._precFloor(-l,a);if(!isNaN(k))a=k}c.max=b;c.min=a;c.axisAnno=g;c.tinc=h;if(o||p){e=b-a;this._calculateMajorMinor(d,c);var f=d.unitMajor;if(m&&f!=0&&!i&&!q){e=b-parseInt(b/f)*f;if(e!=0){b+=f-e;b=this._precCeil(-l,b)}}if(n&&f!=0&&!i&&!q){e=a-parseInt(a/f)*f;if(e!=0){if(e<0)e+=f;a-=Math.abs(e);a=this._precFloor(-l,a)}}}!o||!p;c.max=b;c.min=a},_roundTime:function(i,e,c){var b=e*this._tmInc.day,d=this._fromOADate(i);if(b>0){var a={year:d.getFullYear(),month:d.getMonth(),day:d.getDate(),hour:d.getHours(),minute:d.getMinutes(),second:d.getSeconds()};if(b<this._tmInc.minute){a.second=this._tround(a.second,b,c);return this._getTimeAsDouble(a)}a.second=0;if(b<this._tmInc.hour){b/=this._tmInc.minute;a.minute=this._tround(a.minute,b,c);return this._getTimeAsDouble(a)}a.minute=0;if(b<this._tmInc.day){b/=this._tmInc.hour;a.hour=this._tround(a.hour,b,c);return this._getTimeAsDouble(a)}a.hour=0;if(b<this._tmInc.month){b/=this._tmInc.day;a.day=this._tround(a.day,b,c);return this._getTimeAsDouble(a)}a.day=1;if(b<this._tmInc.year){b/=this._tmInc.month;a.month=this._tround(a.month,b,c);return this._getTimeAsDouble(a)}a.month=0;b/=this._tmInc.year;a.year=this._tround(a.year,b,c);return this._getTimeAsDouble(a)}else{var f=d,h=f-b,g=parseInt(h/e)*e;if(c&&g!=h)g+=e;f=b+g;return f}},_tround:function(c,a,d){var b=parseInt(c/a*a);if(d&&b!=c)b+=parseInt(a);return b},_getTimeAsDouble:function(a){var d=0,c=0;if(a.day<1){c=-1-a.day;a.day=1}else if(a.day>28){c=a.day-28;a.day=28}if(a.month<0){d=-1-a.day;a.month=0}else if(a.month>11){d=a.month-11;a.month=11}var b=new Date(a.year,a.month,a.day,a.hour,a.minute,a.second);b.setDate(b.getDate()+c);b.setMonth(b.getMonth()+d);return this._toOADate(b)},_getTimeDefaultFormat:function(c,d){var b=(c-d)*this._tmInc.day,a="s";if(b>2*this._tmInc.year)a="yyyy";else if(b>this._tmInc.year)a="MMM yy";else if(b>3*this._tmInc.month)a="MMM";else if(b>2*this._tmInc.week)a="MMM d";else if(b>2*this._tmInc.day)a="ddd d";else if(b>this._tmInc.day)a="ddd H:mm";else if(b>this._tmInc.hour)a="H:mm";else if(b>=1e3)a="H:mm:ss";else b>0;return a},_niceTimeUnit:function(c,b){var a=c*this._tmInc.day;a=this._niceTimeSpan(a,b);return a/this._tmInc.day},_niceTimeSpan:function(e,d){var b=this._manualTimeInc(d),c=0,a=0;b<this._tmInc.second;c=Math.ceil(e);if(c==0)return this._timeSpanFromTmInc(b);a=1;if(b<this._tmInc.minute){if(c<this._tmInc.minute){a=this._getNiceInc([1,2,5,10,15,30],c,b);if(a!=0)return a}b=this._tmInc.minute}if(b<this._tmInc.hour){if(c<this._tmInc.hour){a=this._getNiceInc([1,2,5,10,15,30],c,b);if(a!=0)return a}b=this._tmInc.hour}if(b<this._tmInc.day){if(c<this._tmInc.day){a=this._getNiceInc([1,3,6,12],c,b);if(a!=0)return a}b=this._tmInc.day}if(b<this._tmInc.month){if(c<this._tmInc.month){a=this._getNiceInc([1,2,7,14],c,b);if(a!=0)return a}b=this._tmInc.month}if(b<this._tmInc.year){if(c<this._tmInc.year){a=this._getNiceInc([1,2,3,4,6],c,b);if(a!=0)return a}b=this._tmInc.year}a=100*this._tmInc.year;if(c<a){a=this._getNiceInc([1,2,5,10,20,50],c,b);if(a==0)a=100*this._tmInc.year}return a},_getNiceInc:function(c,f,d){for(var a=0,e=c.length;a<e;a++){var b=c[a]*d;if(f<=b)return b}return 0},_timeSpanFromTmInc:function(a){var b=1e3;if(a!=this._tmInc.maxtime)if(a>this._tmInc.tickf1)b=a;else{var d=a,c=1;a+=7;while(d>0){c*=10;d--}b=c}return b},_manualTimeInc:function(a){var b=this._tmInc.second;if(a==null||a.length==0)return b;var c=a.indexOf("f");if(c<=0)if(a.indexOf("s")>=0)b=this._tmInc.second;else if(a.indexOf("m")>=0)b=this._tmInc.minute;else if(a.indexOf("h")>=0||a.indexOf("H")>=0)b=this._tmInc.hour;else if(a.indexOf("d")>=0)b=this._tmInc.day;else if(a.indexOf("M")>=0)b=this._tmInc.month;else if(a.indexOf("y")>=0)b=this._tmInc.year;return b},_tmInc:{tickf7:-7e3,tickf6:-6e3,tickf5:-5e3,tickf4:-4e3,tickf3:-3e3,tickf2:-2e3,tickf1:-1,second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3,month:31*24*60*60*1e3,year:365*24*60*60*1e3,maxtime:2147483647},_niceTickNumber:function(a){if(a==0||a==0)return a;else if(a<0)a=-a;var e=Math.log(a)/Math.log(10),d=parseInt(this._signedFloor(e)),c=a/Math.pow(10,d),b=10;if(c<=1)b=1;else if(c<=2)b=2;else if(c<=5)b=5;return b*Math.pow(10,d)},_niceNumber:function(b,d,e){if(b==0||b==0)return b;else if(b<0)b=-b;var c=b/Math.pow(10,d),a=10;if(e){if(c<1.5)a=1;else if(c<3)a=2;else if(c<7)a=5}else if(c<=1)a=1;else if(c<=2)a=2;else if(c<=5)a=5;return a*Math.pow(10,d)},_nicePrecision:function(a){if(a<=0||isNaN(a))return 0;var c=Math.log(a)/Math.log(10),b=parseInt(this._signedFloor(c)),d=a/Math.pow(10,b);if(d<3)b=-b+1;return b},_precCeil:function(d,c){var b=Math.pow(10,d),a=c/b;a=Math.ceil(a);return a*b},_precFloor:function(d,c){var b=Math.pow(10,d),a=c/b;a=Math.floor(a);return a*b},_signedCeiling:function(a){return a<0?Math.floor(a):Math.ceil(a)},_signedFloor:function(a){return a<0?Math.ceil(a):Math.floor(a)},_getDataExtreme:function(){var a={txx:0,txn:0,tyx:0,tyn:0};this._getDataExtremes(a);if(a.txn>a.txx){a.txn=0;a.txx=1}return a},_getDataExtremes:function(a){var m=this.options,l=m.seriesList,t=m.stacked,s=m.is100Percent,e=m.axis;if(!l||l.length==0)return a;for(var q=[],c=0,o=l.length;c<o;c++){var f=l[c].data,d=[].concat(f.x),b=[].concat(f.y),n=[].concat(f.xy);if(f.xy){d=[],b=[];var g=0,h=0,r=n.length;while(g<r){d[h]=n[g];b[h]=n[g+1];g+=2;h++;f.x=d;f.y=b}}else if(!f.x){d=[];for(var g=0,r=b.length;g<r;g++)d[g]=g;f.x=d}if(t){if(c>0)for(var h=0;h<b.length;h++)b[h]+=q[h];q=[].concat(b)}var i=this._getMinMaxValue(d),j=this._getMinMaxValue(b);if(c==0){a.txx=i.max;a.txn=i.min;a.tyx=j.max;a.tyn=j.min}else{if(a.txx<i.max)a.txx=i.max;if(a.txn>i.min)a.txn=i.min;if(a.tyx<j.max)a.tyx=j.max;if(a.tyn>j.min)a.tyn=j.min}}if(s){a.tyx=1;a.tyn=0}if(d.length)if(isNaN(d[0])){for(var k=[],c=0,o=d.length;c<o;c++){var p={text:d[c],value:c};k.push(p)}e.x.annoMethod="valueLabels";e.x.valueLabels=k;e.x.autoMajor=false;e.x.autoMinor=false;e.x.unitMajor=1;e.x.unitMinor=.5}else if(this._isDate(d[0]))this.axisInfo.x.isTime=true;if(b.length)if(isNaN(b[0])){for(var k=[],c=0,o=b.length;c<o;c++){var p={text:b[c],value:c};k.push(p)}e.y.annoMethod="valueLabels";e.y.valueLabels=k;e.y.autoMajor=false;e.y.autoMinor=false;e.y.unitMajor=1;e.x.unitMinor=.5}else this._isDate(b[0]);return a},_isDate:function(a){return typeof a=="object"&&a.constructor==Date},_getMinMaxValue:function(b){var a={min:0,max:0};if(!b.length)return;if(isNaN(b[0]))if(this._isDate(b[0])){a.min=b[0];a.max=b[0]}else{a.min=0;a.max=b.length-1;return a}else{a.min=b[0];a.max=b[0]}for(var c=0;c<b.length;c++)if(b[c]<a.min)a.min=b[c];else if(b[c]>a.max)a.max=b[c];if(this._isDate(a.min)){a.min=this._toOADate(a.min);a.max=this._toOADate(a.max)}return a},_toOADate:function(b){return(b-new Date(1900,0,1))/this._tmInc.day+2},_fromOADate:function(a){return new Date((a-2)*this._tmInc.day+(new Date(1900,0,1)).getTime())},_isVertical:function(a){return a=="west"||a=="east"},_calculateMajorMinor:function(e,c){var t=e.autoMajor,q=e.autoMinor,m=c.max,n=c.min,r=c.isTime,s=c.tinc;if(t||q){var d=m-n,f=null,g=null,j=a.extend(true,{},this.options.textStyle,e.textStyle,e.labels.style);if(r){var p=c.annoFormatString,u=a.format(this._fromOADate(m),p),v=a.format(this._fromOADate(n),p),l=this._text(-100,-100,u).attr(j),k=this._text(-100,-100,v).attr(j);f=l.wijGetBBox();g=k.wijGetBBox();l.remove();k.remove()}else{var o=this._nicePrecision(d),i=o+1;if(i<0||i>15)i=0;var l=this._text(-100,-100,this.canvas.wij.round(m,i)).attr(j),k=this._text(-100,-100,this.canvas.wij.round(n,i)).attr(j);f=l.wijGetBBox();g=k.wijGetBBox();l.remove();k.remove()}var h=0,b=0;if(f.width<g.width)f.width=g.width;if(f.height<g.height)f.height=g.height;if(!this._isVertical(e.compass)){var x=this.canvasBounds.endX-this.canvasBounds.startX-c.offset-c.axisTextOffset;b=x/f.width;if(Number.POSITIVE_INFINITY==b)h=0;else h=parseInt(b)}else{var w=this.canvasBounds.endY-this.canvasBounds.startY-c.offset-c.axisTextOffset;b=w/f.height;if(Number.POSITIVE_INFINITY==b)h=0;else h=parseInt(b)}b=d;if(h>0){d/=h;if(r)if(d<s)b=s;else b=this._niceTimeUnit(d,c.annoFormatString);else{c.tprec=this._nicePrecision(d);b=this._niceNumber(2*d,-o,true);if(b<d)b=this._niceNumber(d,-o+1,false);if(b<d)b=this._niceTickNumber(d)}}e.unitMajor=b;if(q)e.unitMinor=e.unitMajor/2}},_getScaling:function(b,d,e,c){var a=d-e;if(a==0)a=1;if(b)a=-a;return c/a},_getTranslation:function(d,b,e,f,c){var a=0;if(d){a=b.y;a-=c*e}else{a=b.x;a-=c*f}return a},_addClass:function(c,b){b=b||"";a.each(c,function(){if(isSVGElem(this)){var c=this;a.each(b.split(/\s+/),function(e,d){var b=c.className?c.className.baseVal:c.getAttribute("class");if(a.inArray(d,b.split(/\s+/))==-1){b+=(b?" ":"")+d;c.className?(c.className.baseVal=b):c.setAttribute("class",b)}})}else a(this).addClass(b)})}})})(jQuery);